"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_lib_daily_ts";
exports.ids = ["_rsc_lib_daily_ts"];
exports.modules = {

/***/ "(rsc)/./lib/daily.ts":
/*!**********************!*\
  !*** ./lib/daily.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createMeetingToken: () => (/* binding */ createMeetingToken),\n/* harmony export */   createTherapySessionRoom: () => (/* binding */ createTherapySessionRoom),\n/* harmony export */   deleteDailyRoom: () => (/* binding */ deleteDailyRoom),\n/* harmony export */   generateMeetingToken: () => (/* binding */ generateMeetingToken),\n/* harmony export */   getRoomInfo: () => (/* binding */ getRoomInfo),\n/* harmony export */   startSessionRecording: () => (/* binding */ startSessionRecording),\n/* harmony export */   stopSessionRecording: () => (/* binding */ stopSessionRecording)\n/* harmony export */ });\n// Daily.co integration for therapy sessions\nconst DAILY_API_KEY = process.env.DAILY_API_KEY;\nconst DAILY_API_URL = 'https://api.daily.co/v1';\nasync function createTherapySessionRoom(options) {\n    if (!DAILY_API_KEY) {\n        console.error('‚ùå Daily.co API key not configured');\n        throw new Error('DAILY_API_KEY is not configured');\n    }\n    console.log('üîç Daily.co API key configured, creating room...');\n    const { sessionId, therapistName, patientName, duration, scheduledTime } = options;\n    // Create a unique room name\n    const roomName = `therapy-session-${sessionId}-${Date.now()}`;\n    // ONLY 30 MINUTES for Daily.co (therapy session only)\n    // The buffer period is handled by your app, not Daily.co\n    const THERAPY_DURATION_MINUTES = 30; // Therapy session is 30 minutes\n    const expirationTime = new Date(scheduledTime.getTime() + THERAPY_DURATION_MINUTES * 60 * 1000);\n    // Try different configurations in order of preference\n    const configs = [\n        // Configuration with meeting tokens (preferred)\n        {\n            name: roomName,\n            privacy: 'private',\n            properties: {\n                max_participants: 2,\n                enable_knocking: false,\n                enable_screenshare: true,\n                enable_chat: true,\n                exp: Math.floor(expirationTime.getTime() / 1000) // Set room expiration\n            }\n        },\n        // Minimal configuration\n        {\n            name: roomName,\n            privacy: 'private',\n            properties: {\n                max_participants: 2,\n                exp: Math.floor(expirationTime.getTime() / 1000) // Set room expiration\n            }\n        },\n        // Even more minimal\n        {\n            name: roomName,\n            privacy: 'private',\n            properties: {\n                exp: Math.floor(expirationTime.getTime() / 1000) // Set room expiration\n            }\n        },\n        // Absolute minimal\n        {\n            name: roomName,\n            properties: {\n                exp: Math.floor(expirationTime.getTime() / 1000) // Set room expiration\n            }\n        }\n    ];\n    let lastError = null;\n    for(let i = 0; i < configs.length; i++){\n        const roomConfig = configs[i];\n        try {\n            console.log(`üîç Creating Daily.co room (attempt ${i + 1}):`, roomConfig);\n            const response = await fetch(`${DAILY_API_URL}/rooms`, {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${DAILY_API_KEY}`,\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(roomConfig)\n            });\n            if (!response.ok) {\n                const errorText = await response.text();\n                console.error(`‚ùå Daily.co API error (attempt ${i + 1}):`, response.status, errorText);\n                // Try to parse the error for more specific handling\n                let errorMessage = `Daily.co API error: ${response.status}`;\n                try {\n                    const errorData = JSON.parse(errorText);\n                    if (errorData.info) {\n                        errorMessage += ` - ${errorData.info}`;\n                    }\n                } catch  {\n                    errorMessage += ` - ${errorText}`;\n                }\n                lastError = new Error(errorMessage);\n                continue; // Try next configuration\n            }\n            const roomData = await response.json();\n            console.log(`‚úÖ Daily.co room created successfully (attempt ${i + 1}):`, roomData);\n            console.log('üé• Daily.co room created with 30-minute duration for therapy session');\n            return {\n                id: roomData.id,\n                name: roomData.name,\n                url: roomData.url,\n                created_at: roomData.created_at,\n                config: roomData.config\n            };\n        } catch (error) {\n            console.error(`‚ùå Failed to create Daily.co room (attempt ${i + 1}):`, error);\n            lastError = error instanceof Error ? error : new Error('Unknown error');\n            continue; // Try next configuration\n        }\n    }\n    // If we get here, all configurations failed\n    console.error('‚ùå All Daily.co room creation attempts failed');\n    throw new Error(`Failed to create video room after ${configs.length} attempts: ${lastError?.message || 'Unknown error'}`);\n}\nasync function deleteDailyRoom(roomName) {\n    if (!DAILY_API_KEY) {\n        throw new Error('DAILY_API_KEY is not configured');\n    }\n    try {\n        const response = await fetch(`${DAILY_API_URL}/rooms/${roomName}`, {\n            method: 'DELETE',\n            headers: {\n                'Authorization': `Bearer ${DAILY_API_KEY}`\n            }\n        });\n        if (!response.ok) {\n            console.warn('‚ö†Ô∏è Failed to delete Daily.co room:', response.status);\n        } else {\n            console.log('‚úÖ Daily.co room deleted successfully');\n        }\n    } catch (error) {\n        console.error('‚ùå Error deleting Daily.co room:', error);\n    }\n}\nasync function getRoomInfo(roomName) {\n    if (!DAILY_API_KEY) {\n        throw new Error('DAILY_API_KEY is not configured');\n    }\n    try {\n        const response = await fetch(`${DAILY_API_URL}/rooms/${roomName}`, {\n            headers: {\n                'Authorization': `Bearer ${DAILY_API_KEY}`\n            }\n        });\n        if (!response.ok) {\n            if (response.status === 404) {\n                return null;\n            }\n            throw new Error(`Daily.co API error: ${response.status}`);\n        }\n        const roomData = await response.json();\n        return roomData;\n    } catch (error) {\n        console.error('‚ùå Error fetching room info:', error);\n        return null;\n    }\n}\n// Helper function to generate meeting tokens (for enhanced security)\nasync function createMeetingToken(roomName, userName, isOwner = false) {\n    if (!DAILY_API_KEY) {\n        throw new Error('DAILY_API_KEY is not configured');\n    }\n    const tokenConfig = {\n        properties: {\n            room_name: roomName,\n            user_name: userName,\n            is_owner: isOwner,\n            exp: Math.floor((Date.now() + 24 * 60 * 60 * 1000) / 1000)\n        }\n    };\n    try {\n        console.log('üîç Creating meeting token with config:', tokenConfig);\n        const response = await fetch(`${DAILY_API_URL}/meeting-tokens`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${DAILY_API_KEY}`,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(tokenConfig)\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error('‚ùå Daily.co token API error:', response.status, errorText);\n            throw new Error(`Daily.co token API error: ${response.status} - ${errorText}`);\n        }\n        const tokenData = await response.json();\n        console.log('‚úÖ Meeting token created successfully:', tokenData.token ? 'Token received' : 'No token in response');\n        return tokenData.token;\n    } catch (error) {\n        console.error('‚ùå Failed to create meeting token:', error);\n        throw new Error(`Failed to create meeting token: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n}\n// Export aliases for the missing functions\nconst generateMeetingToken = createMeetingToken;\nasync function startSessionRecording(roomName) {\n    if (!DAILY_API_KEY) {\n        return {\n            success: false,\n            error: 'DAILY_API_KEY is not configured'\n        };\n    }\n    try {\n        const response = await fetch(`${DAILY_API_URL}/recordings`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${DAILY_API_KEY}`,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                room_name: roomName,\n                start_recording: true\n            })\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error('‚ùå Daily.co recording API error:', response.status, errorText);\n            return {\n                success: false,\n                error: `Daily.co recording API error: ${response.status} - ${errorText}`\n            };\n        }\n        const data = await response.json();\n        console.log('‚úÖ Session recording started successfully');\n        return {\n            success: true,\n            recordingId: data.id\n        };\n    } catch (error) {\n        console.error('‚ùå Failed to start session recording:', error);\n        return {\n            success: false,\n            error: `Failed to start session recording: ${error instanceof Error ? error.message : 'Unknown error'}`\n        };\n    }\n}\nasync function stopSessionRecording(roomName) {\n    if (!DAILY_API_KEY) {\n        return {\n            success: false,\n            error: 'DAILY_API_KEY is not configured'\n        };\n    }\n    try {\n        const response = await fetch(`${DAILY_API_URL}/recordings`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${DAILY_API_KEY}`,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                room_name: roomName,\n                stop_recording: true\n            })\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error('‚ùå Daily.co recording API error:', response.status, errorText);\n            return {\n                success: false,\n                error: `Daily.co recording API error: ${response.status} - ${errorText}`\n            };\n        }\n        const data = await response.json();\n        console.log('‚úÖ Session recording stopped successfully');\n        return {\n            success: true,\n            recordingUrl: data.url\n        };\n    } catch (error) {\n        console.error('‚ùå Failed to stop session recording:', error);\n        return {\n            success: false,\n            error: `Failed to stop session recording: ${error instanceof Error ? error.message : 'Unknown error'}`\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVMsQ0FBQztnQkFDbkJ1QixXQUFXbEQ7Z0JBQ1g4RCxnQkFBZ0I7WUFDbEI7UUFDRjtRQUVBLElBQUksQ0FBQ3pDLFNBQVNPLEVBQUUsRUFBRTtZQUNoQixNQUFNQyxZQUFZLE1BQU1SLFNBQVNTLElBQUk7WUFDckN2QyxRQUFRQyxLQUFLLENBQUMsbUNBQW1DNkIsU0FBU1UsTUFBTSxFQUFFRjtZQUNsRSxPQUFPO2dCQUFFNEIsU0FBUztnQkFBT2pFLE9BQU8sQ0FBQyw4QkFBOEIsRUFBRTZCLFNBQVNVLE1BQU0sQ0FBQyxHQUFHLEVBQUVGLFdBQVc7WUFBQztRQUNwRztRQUVBLE1BQU04QixPQUFPLE1BQU10QyxTQUFTZ0IsSUFBSTtRQUNoQzlDLFFBQVFHLEdBQUcsQ0FBQztRQUNaLE9BQU87WUFBRStELFNBQVM7WUFBTU0sY0FBY0osS0FBS3BCLEdBQUc7UUFBQztJQUNqRCxFQUFFLE9BQU8vQyxPQUFPO1FBQ2RELFFBQVFDLEtBQUssQ0FBQyx1Q0FBdUNBO1FBQ3JELE9BQU87WUFBRWlFLFNBQVM7WUFBT2pFLE9BQU8sQ0FBQyxrQ0FBa0MsRUFBRUEsaUJBQWlCQyxRQUFRRCxNQUFNa0QsT0FBTyxHQUFHLGlCQUFpQjtRQUFDO0lBQ2xJO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWNib29rL0Rlc2t0b3AvdHJwaS1hcHAvbGliL2RhaWx5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIERhaWx5LmNvIGludGVncmF0aW9uIGZvciB0aGVyYXB5IHNlc3Npb25zXG5jb25zdCBEQUlMWV9BUElfS0VZID0gcHJvY2Vzcy5lbnYuREFJTFlfQVBJX0tFWTtcbmNvbnN0IERBSUxZX0FQSV9VUkwgPSAnaHR0cHM6Ly9hcGkuZGFpbHkuY28vdjEnO1xuXG5leHBvcnQgaW50ZXJmYWNlIERhaWx5Um9vbSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdXJsOiBzdHJpbmc7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgY29uZmlnOiB7XG4gICAgbWF4X3BhcnRpY2lwYW50czogbnVtYmVyO1xuICAgIG5iZj86IG51bWJlcjsgLy8gbm90IGJlZm9yZSAoc3RhcnQgdGltZSlcbiAgICBleHA/OiBudW1iZXI7IC8vIGV4cGlyYXRpb24gdGltZVxuICAgIGVuYWJsZV9yZWNvcmRpbmc/OiBib29sZWFuO1xuICAgIGVuYWJsZV90cmFuc2NyaXB0aW9uPzogYm9vbGVhbjtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVSb29tT3B0aW9ucyB7XG4gIHNlc3Npb25JZDogc3RyaW5nO1xuICB0aGVyYXBpc3ROYW1lOiBzdHJpbmc7XG4gIHBhdGllbnROYW1lOiBzdHJpbmc7XG4gIGR1cmF0aW9uOiBudW1iZXI7IC8vIGluIG1pbnV0ZXNcbiAgc2NoZWR1bGVkVGltZTogRGF0ZTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRoZXJhcHlTZXNzaW9uUm9vbShvcHRpb25zOiBDcmVhdGVSb29tT3B0aW9ucyk6IFByb21pc2U8RGFpbHlSb29tPiB7XG4gIGlmICghREFJTFlfQVBJX0tFWSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBEYWlseS5jbyBBUEkga2V5IG5vdCBjb25maWd1cmVkJyk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdEQUlMWV9BUElfS0VZIGlzIG5vdCBjb25maWd1cmVkJyk7XG4gIH1cbiAgXG4gIGNvbnNvbGUubG9nKCfwn5SNIERhaWx5LmNvIEFQSSBrZXkgY29uZmlndXJlZCwgY3JlYXRpbmcgcm9vbS4uLicpO1xuXG4gIGNvbnN0IHsgc2Vzc2lvbklkLCB0aGVyYXBpc3ROYW1lLCBwYXRpZW50TmFtZSwgZHVyYXRpb24sIHNjaGVkdWxlZFRpbWUgfSA9IG9wdGlvbnM7XG4gIFxuICAvLyBDcmVhdGUgYSB1bmlxdWUgcm9vbSBuYW1lXG4gIGNvbnN0IHJvb21OYW1lID0gYHRoZXJhcHktc2Vzc2lvbi0ke3Nlc3Npb25JZH0tJHtEYXRlLm5vdygpfWA7XG4gIFxuICAvLyBPTkxZIDMwIE1JTlVURVMgZm9yIERhaWx5LmNvICh0aGVyYXB5IHNlc3Npb24gb25seSlcbiAgLy8gVGhlIGJ1ZmZlciBwZXJpb2QgaXMgaGFuZGxlZCBieSB5b3VyIGFwcCwgbm90IERhaWx5LmNvXG4gIGNvbnN0IFRIRVJBUFlfRFVSQVRJT05fTUlOVVRFUyA9IDMwOyAvLyBUaGVyYXB5IHNlc3Npb24gaXMgMzAgbWludXRlc1xuICBjb25zdCBleHBpcmF0aW9uVGltZSA9IG5ldyBEYXRlKHNjaGVkdWxlZFRpbWUuZ2V0VGltZSgpICsgVEhFUkFQWV9EVVJBVElPTl9NSU5VVEVTICogNjAgKiAxMDAwKTtcbiAgXG4gIC8vIFRyeSBkaWZmZXJlbnQgY29uZmlndXJhdGlvbnMgaW4gb3JkZXIgb2YgcHJlZmVyZW5jZVxuICBjb25zdCBjb25maWdzID0gW1xuICAgIC8vIENvbmZpZ3VyYXRpb24gd2l0aCBtZWV0aW5nIHRva2VucyAocHJlZmVycmVkKVxuICAgIHtcbiAgICAgIG5hbWU6IHJvb21OYW1lLFxuICAgICAgcHJpdmFjeTogJ3ByaXZhdGUnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBtYXhfcGFydGljaXBhbnRzOiAyLFxuICAgICAgICBlbmFibGVfa25vY2tpbmc6IGZhbHNlLFxuICAgICAgICBlbmFibGVfc2NyZWVuc2hhcmU6IHRydWUsXG4gICAgICAgIGVuYWJsZV9jaGF0OiB0cnVlLFxuICAgICAgICBleHA6IE1hdGguZmxvb3IoZXhwaXJhdGlvblRpbWUuZ2V0VGltZSgpIC8gMTAwMCkgLy8gU2V0IHJvb20gZXhwaXJhdGlvblxuICAgICAgfVxuICAgIH0sXG4gICAgLy8gTWluaW1hbCBjb25maWd1cmF0aW9uXG4gICAge1xuICAgICAgbmFtZTogcm9vbU5hbWUsXG4gICAgICBwcml2YWN5OiAncHJpdmF0ZScsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIG1heF9wYXJ0aWNpcGFudHM6IDIsXG4gICAgICAgIGV4cDogTWF0aC5mbG9vcihleHBpcmF0aW9uVGltZS5nZXRUaW1lKCkgLyAxMDAwKSAvLyBTZXQgcm9vbSBleHBpcmF0aW9uXG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBFdmVuIG1vcmUgbWluaW1hbFxuICAgIHtcbiAgICAgIG5hbWU6IHJvb21OYW1lLFxuICAgICAgcHJpdmFjeTogJ3ByaXZhdGUnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBleHA6IE1hdGguZmxvb3IoZXhwaXJhdGlvblRpbWUuZ2V0VGltZSgpIC8gMTAwMCkgLy8gU2V0IHJvb20gZXhwaXJhdGlvblxuICAgICAgfVxuICAgIH0sXG4gICAgLy8gQWJzb2x1dGUgbWluaW1hbFxuICAgIHtcbiAgICAgIG5hbWU6IHJvb21OYW1lLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBleHA6IE1hdGguZmxvb3IoZXhwaXJhdGlvblRpbWUuZ2V0VGltZSgpIC8gMTAwMCkgLy8gU2V0IHJvb20gZXhwaXJhdGlvblxuICAgICAgfVxuICAgIH1cbiAgXTtcblxuICBsZXQgbGFzdEVycm9yOiBFcnJvciB8IG51bGwgPSBudWxsO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZmlncy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHJvb21Db25maWcgPSBjb25maWdzW2ldO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+UjSBDcmVhdGluZyBEYWlseS5jbyByb29tIChhdHRlbXB0ICR7aSArIDF9KTpgLCByb29tQ29uZmlnKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtEQUlMWV9BUElfVVJMfS9yb29tc2AsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtEQUlMWV9BUElfS0VZfWAsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocm9vbUNvbmZpZyksXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBEYWlseS5jbyBBUEkgZXJyb3IgKGF0dGVtcHQgJHtpICsgMX0pOmAsIHJlc3BvbnNlLnN0YXR1cywgZXJyb3JUZXh0KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyeSB0byBwYXJzZSB0aGUgZXJyb3IgZm9yIG1vcmUgc3BlY2lmaWMgaGFuZGxpbmdcbiAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9IGBEYWlseS5jbyBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWA7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gSlNPTi5wYXJzZShlcnJvclRleHQpO1xuICAgICAgICAgIGlmIChlcnJvckRhdGEuaW5mbykge1xuICAgICAgICAgICAgZXJyb3JNZXNzYWdlICs9IGAgLSAke2Vycm9yRGF0YS5pbmZvfWA7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgKz0gYCAtICR7ZXJyb3JUZXh0fWA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxhc3RFcnJvciA9IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICBjb250aW51ZTsgLy8gVHJ5IG5leHQgY29uZmlndXJhdGlvblxuICAgICAgfVxuXG4gICAgICBjb25zdCByb29tRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYOKchSBEYWlseS5jbyByb29tIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IChhdHRlbXB0ICR7aSArIDF9KTpgLCByb29tRGF0YSk7XG4gICAgICBjb25zb2xlLmxvZygn8J+OpSBEYWlseS5jbyByb29tIGNyZWF0ZWQgd2l0aCAzMC1taW51dGUgZHVyYXRpb24gZm9yIHRoZXJhcHkgc2Vzc2lvbicpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogcm9vbURhdGEuaWQsXG4gICAgICAgIG5hbWU6IHJvb21EYXRhLm5hbWUsXG4gICAgICAgIHVybDogcm9vbURhdGEudXJsLFxuICAgICAgICBjcmVhdGVkX2F0OiByb29tRGF0YS5jcmVhdGVkX2F0LFxuICAgICAgICBjb25maWc6IHJvb21EYXRhLmNvbmZpZ1xuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGDinYwgRmFpbGVkIHRvIGNyZWF0ZSBEYWlseS5jbyByb29tIChhdHRlbXB0ICR7aSArIDF9KTpgLCBlcnJvcik7XG4gICAgICBsYXN0RXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoJ1Vua25vd24gZXJyb3InKTtcbiAgICAgIGNvbnRpbnVlOyAvLyBUcnkgbmV4dCBjb25maWd1cmF0aW9uXG4gICAgfVxuICB9XG5cbiAgLy8gSWYgd2UgZ2V0IGhlcmUsIGFsbCBjb25maWd1cmF0aW9ucyBmYWlsZWRcbiAgY29uc29sZS5lcnJvcign4p2MIEFsbCBEYWlseS5jbyByb29tIGNyZWF0aW9uIGF0dGVtcHRzIGZhaWxlZCcpO1xuICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgdmlkZW8gcm9vbSBhZnRlciAke2NvbmZpZ3MubGVuZ3RofSBhdHRlbXB0czogJHtsYXN0RXJyb3I/Lm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlRGFpbHlSb29tKHJvb21OYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgaWYgKCFEQUlMWV9BUElfS0VZKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdEQUlMWV9BUElfS0VZIGlzIG5vdCBjb25maWd1cmVkJyk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7REFJTFlfQVBJX1VSTH0vcm9vbXMvJHtyb29tTmFtZX1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtEQUlMWV9BUElfS0VZfWAsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gRmFpbGVkIHRvIGRlbGV0ZSBEYWlseS5jbyByb29tOicsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgRGFpbHkuY28gcm9vbSBkZWxldGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZGVsZXRpbmcgRGFpbHkuY28gcm9vbTonLCBlcnJvcik7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJvb21JbmZvKHJvb21OYW1lOiBzdHJpbmcpOiBQcm9taXNlPERhaWx5Um9vbSB8IG51bGw+IHtcbiAgaWYgKCFEQUlMWV9BUElfS0VZKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdEQUlMWV9BUElfS0VZIGlzIG5vdCBjb25maWd1cmVkJyk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7REFJTFlfQVBJX1VSTH0vcm9vbXMvJHtyb29tTmFtZX1gLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke0RBSUxZX0FQSV9LRVl9YCxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYERhaWx5LmNvIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgfVxuXG4gICAgY29uc3Qgcm9vbURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJvb21EYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBmZXRjaGluZyByb29tIGluZm86JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZW5lcmF0ZSBtZWV0aW5nIHRva2VucyAoZm9yIGVuaGFuY2VkIHNlY3VyaXR5KVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU1lZXRpbmdUb2tlbihyb29tTmFtZTogc3RyaW5nLCB1c2VyTmFtZTogc3RyaW5nLCBpc093bmVyOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPHN0cmluZz4ge1xuICBpZiAoIURBSUxZX0FQSV9LRVkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0RBSUxZX0FQSV9LRVkgaXMgbm90IGNvbmZpZ3VyZWQnKTtcbiAgfVxuXG4gIGNvbnN0IHRva2VuQ29uZmlnID0ge1xuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgIHJvb21fbmFtZTogcm9vbU5hbWUsXG4gICAgICB1c2VyX25hbWU6IHVzZXJOYW1lLFxuICAgICAgaXNfb3duZXI6IGlzT3duZXIsXG4gICAgICBleHA6IE1hdGguZmxvb3IoKERhdGUubm93KCkgKyAyNCAqIDYwICogNjAgKiAxMDAwKSAvIDEwMDApLCAvLyAyNCBob3Vyc1xuICAgIH1cbiAgfTtcblxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIENyZWF0aW5nIG1lZXRpbmcgdG9rZW4gd2l0aCBjb25maWc6JywgdG9rZW5Db25maWcpO1xuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7REFJTFlfQVBJX1VSTH0vbWVldGluZy10b2tlbnNgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7REFJTFlfQVBJX0tFWX1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHRva2VuQ29uZmlnKSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBEYWlseS5jbyB0b2tlbiBBUEkgZXJyb3I6JywgcmVzcG9uc2Uuc3RhdHVzLCBlcnJvclRleHQpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBEYWlseS5jbyB0b2tlbiBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAtICR7ZXJyb3JUZXh0fWApO1xuICAgIH1cblxuICAgIGNvbnN0IHRva2VuRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBjb25zb2xlLmxvZygn4pyFIE1lZXRpbmcgdG9rZW4gY3JlYXRlZCBzdWNjZXNzZnVsbHk6JywgdG9rZW5EYXRhLnRva2VuID8gJ1Rva2VuIHJlY2VpdmVkJyA6ICdObyB0b2tlbiBpbiByZXNwb25zZScpO1xuICAgIHJldHVybiB0b2tlbkRhdGEudG9rZW47XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBjcmVhdGUgbWVldGluZyB0b2tlbjonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIG1lZXRpbmcgdG9rZW46ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gIH1cbn1cblxuLy8gRXhwb3J0IGFsaWFzZXMgZm9yIHRoZSBtaXNzaW5nIGZ1bmN0aW9uc1xuZXhwb3J0IGNvbnN0IGdlbmVyYXRlTWVldGluZ1Rva2VuID0gY3JlYXRlTWVldGluZ1Rva2VuO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RhcnRTZXNzaW9uUmVjb3JkaW5nKHJvb21OYW1lOiBzdHJpbmcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmc7IHJlY29yZGluZ0lkPzogc3RyaW5nIH0+IHtcbiAgaWYgKCFEQUlMWV9BUElfS0VZKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnREFJTFlfQVBJX0tFWSBpcyBub3QgY29uZmlndXJlZCcgfTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtEQUlMWV9BUElfVVJMfS9yZWNvcmRpbmdzYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke0RBSUxZX0FQSV9LRVl9YCxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHJvb21fbmFtZTogcm9vbU5hbWUsXG4gICAgICAgIHN0YXJ0X3JlY29yZGluZzogdHJ1ZVxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRGFpbHkuY28gcmVjb3JkaW5nIEFQSSBlcnJvcjonLCByZXNwb25zZS5zdGF0dXMsIGVycm9yVGV4dCk7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBEYWlseS5jbyByZWNvcmRpbmcgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke2Vycm9yVGV4dH1gIH07XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBjb25zb2xlLmxvZygn4pyFIFNlc3Npb24gcmVjb3JkaW5nIHN0YXJ0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgcmVjb3JkaW5nSWQ6IGRhdGEuaWQgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIHN0YXJ0IHNlc3Npb24gcmVjb3JkaW5nOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBGYWlsZWQgdG8gc3RhcnQgc2Vzc2lvbiByZWNvcmRpbmc6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdG9wU2Vzc2lvblJlY29yZGluZyhyb29tTmFtZTogc3RyaW5nKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nOyByZWNvcmRpbmdVcmw/OiBzdHJpbmcgfT4ge1xuICBpZiAoIURBSUxZX0FQSV9LRVkpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdEQUlMWV9BUElfS0VZIGlzIG5vdCBjb25maWd1cmVkJyB9O1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0RBSUxZX0FQSV9VUkx9L3JlY29yZGluZ3NgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7REFJTFlfQVBJX0tFWX1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgcm9vbV9uYW1lOiByb29tTmFtZSxcbiAgICAgICAgc3RvcF9yZWNvcmRpbmc6IHRydWVcbiAgICAgIH0pLFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIERhaWx5LmNvIHJlY29yZGluZyBBUEkgZXJyb3I6JywgcmVzcG9uc2Uuc3RhdHVzLCBlcnJvclRleHQpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgRGFpbHkuY28gcmVjb3JkaW5nIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9IC0gJHtlcnJvclRleHR9YCB9O1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgY29uc29sZS5sb2coJ+KchSBTZXNzaW9uIHJlY29yZGluZyBzdG9wcGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHJlY29yZGluZ1VybDogZGF0YS51cmwgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIHN0b3Agc2Vzc2lvbiByZWNvcmRpbmc6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYEZhaWxlZCB0byBzdG9wIHNlc3Npb24gcmVjb3JkaW5nOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAgfTtcbiAgfVxufSJdLCJuYW1lcyI6WyJEQUlMWV9BUElfS0VZIiwicHJvY2VzcyIsImVudiIsIkRBSUxZX0FQSV9VUkwiLCJjcmVhdGVUaGVyYXB5U2Vzc2lvblJvb20iLCJvcHRpb25zIiwiY29uc29sZSIsImVycm9yIiwiRXJyb3IiLCJsb2ciLCJzZXNzaW9uSWQiLCJ0aGVyYXBpc3ROYW1lIiwicGF0aWVudE5hbWUiLCJkdXJhdGlvbiIsInNjaGVkdWxlZFRpbWUiLCJyb29tTmFtZSIsIkRhdGUiLCJub3ciLCJUSEVSQVBZX0RVUkFUSU9OX01JTlVURVMiLCJleHBpcmF0aW9uVGltZSIsImdldFRpbWUiLCJjb25maWdzIiwibmFtZSIsInByaXZhY3kiLCJwcm9wZXJ0aWVzIiwibWF4X3BhcnRpY2lwYW50cyIsImVuYWJsZV9rbm9ja2luZyIsImVuYWJsZV9zY3JlZW5zaGFyZSIsImVuYWJsZV9jaGF0IiwiZXhwIiwiTWF0aCIsImZsb29yIiwibGFzdEVycm9yIiwiaSIsImxlbmd0aCIsInJvb21Db25maWciLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJlcnJvclRleHQiLCJ0ZXh0Iiwic3RhdHVzIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JEYXRhIiwicGFyc2UiLCJpbmZvIiwicm9vbURhdGEiLCJqc29uIiwiaWQiLCJ1cmwiLCJjcmVhdGVkX2F0IiwiY29uZmlnIiwibWVzc2FnZSIsImRlbGV0ZURhaWx5Um9vbSIsIndhcm4iLCJnZXRSb29tSW5mbyIsImNyZWF0ZU1lZXRpbmdUb2tlbiIsInVzZXJOYW1lIiwiaXNPd25lciIsInRva2VuQ29uZmlnIiwicm9vbV9uYW1lIiwidXNlcl9uYW1lIiwiaXNfb3duZXIiLCJ0b2tlbkRhdGEiLCJ0b2tlbiIsImdlbmVyYXRlTWVldGluZ1Rva2VuIiwic3RhcnRTZXNzaW9uUmVjb3JkaW5nIiwic3VjY2VzcyIsInN0YXJ0X3JlY29yZGluZyIsImRhdGEiLCJyZWNvcmRpbmdJZCIsInN0b3BTZXNzaW9uUmVjb3JkaW5nIiwic3RvcF9yZWNvcmRpbmciLCJyZWNvcmRpbmdVcmwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/daily.ts\n");

/***/ })

};
;