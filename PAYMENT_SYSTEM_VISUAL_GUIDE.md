# Payment System - Visual Guide ğŸ¨

## ğŸ“ User Journey Maps

### 1. Credit Purchase Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER WANTS TO BOOK SESSION               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Check Credits  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                 â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
                 â”‚           â”‚
           No Credits    Has Credits
                 â”‚           â”‚
                 â†“           â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Go to    â”‚  â”‚   Book   â”‚
         â”‚  Credits  â”‚  â”‚ Session  â”‚
         â”‚   Page    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ View Packages  â”‚
      â”‚ â€¢ Single       â”‚
      â”‚ â€¢ Bronze       â”‚
      â”‚ â€¢ Silver       â”‚
      â”‚ â€¢ Gold â­      â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Select Package â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Confirm Order  â”‚
      â”‚ â€¢ Package Info â”‚
      â”‚ â€¢ Price        â”‚
      â”‚ â€¢ Sessions     â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Redirect to    â”‚
      â”‚   Paystack     â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Enter Payment  â”‚
      â”‚    Details     â”‚
      â”‚ â€¢ Card Number  â”‚
      â”‚ â€¢ CVV          â”‚
      â”‚ â€¢ Expiry       â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  Authenticate  â”‚
      â”‚  â€¢ PIN         â”‚
      â”‚  â€¢ OTP         â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Payment Status â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
        â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
        â”‚           â”‚
    Success      Failed
        â”‚           â”‚
        â†“           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Credits   â”‚  â”‚  Retry   â”‚
â”‚  Added    â”‚  â”‚ Payment  â”‚
â”‚ âœ…        â”‚  â”‚    âŒ    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Book    â”‚
â”‚  Session  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. Refund Request Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              USER WANTS REFUND                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Go to Payment  â”‚
              â”‚    History     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Select Payment â”‚
              â”‚ Click "Refund" â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Choose Reason  â”‚
              â”‚ â€¢ Cancelled    â”‚
              â”‚ â€¢ Service Issueâ”‚
              â”‚ â€¢ Technical    â”‚
              â”‚ â€¢ Other        â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Add Details    â”‚
              â”‚  (Optional)    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Submit Request â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Status:        â”‚
              â”‚ â³ PENDING    â”‚
              â”‚ (24-48h)       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                 â”‚
              â†“                 â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   APPROVED   â”‚  â”‚   REJECTED   â”‚
      â”‚      âœ…      â”‚  â”‚      âŒ      â”‚
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                 â”‚
             â†“                 â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
      â”‚  Processing  â”‚        â”‚
      â”‚      âš™ï¸      â”‚        â”‚
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
             â”‚                 â”‚
             â†“                 â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
      â”‚  COMPLETED   â”‚        â”‚
      â”‚   ğŸ’° Refund  â”‚        â”‚
      â”‚   to Bank    â”‚        â”‚
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
             â”‚                 â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Notification   â”‚
              â”‚    Sent ğŸ“§     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ System Flow Diagrams

### Payment Processing Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          â”‚  POST   â”‚          â”‚ Create  â”‚          â”‚
â”‚   User   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚  Next.js â”‚â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ Pending  â”‚
â”‚          â”‚ Initiateâ”‚   API    â”‚ Record  â”‚ Payment  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Call Paystack API
                           â†“
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚          â”‚
                     â”‚ Paystack â”‚
                     â”‚   API    â”‚
                     â”‚          â”‚
                     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Return Payment URL
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          â”‚ Redirectâ”‚          â”‚
â”‚   User   â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Next.js â”‚
â”‚          â”‚         â”‚   API    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ Complete Payment
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          â”‚
â”‚ Paystack â”‚
â”‚  Portal  â”‚
â”‚          â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â”‚
      â”‚ Payment Success
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          â”‚ Webhook â”‚          â”‚ Verify  â”‚          â”‚
â”‚ Paystack â”œâ”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚  Next.js â”‚â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ Payment  â”‚
â”‚          â”‚         â”‚   API    â”‚         â”‚  Table   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Add Credits
                           â†“
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚          â”‚
                     â”‚  Credit  â”‚
                     â”‚  Table   â”‚
                     â”‚          â”‚
                     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Send Notification
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          â”‚  Email  â”‚          â”‚
â”‚   User   â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Courier â”‚
â”‚          â”‚         â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Credit Usage Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER   â”‚
â”‚  Books   â”‚
â”‚ Session  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check Available  â”‚
â”‚    Credits       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Has Credits?â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
  â”Œâ”€â”€â”€â”´â”€â”€â”€â”
  â”‚       â”‚
 Yes     No
  â”‚       â”‚
  â”‚       â†“
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  â”‚  Prompt  â”‚
  â”‚  â”‚ Purchase â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select Best  â”‚
â”‚  Credit      â”‚
â”‚ (Free First) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mark Credit  â”‚
â”‚  as USED     â”‚
â”‚ + Session ID â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create       â”‚
â”‚ Session      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Session      â”‚
â”‚ Confirmed âœ… â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Refund Processing Flow (Admin)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Refund Request â”‚
â”‚   ğŸ“ Pending    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin Reviews  â”‚
â”‚  Request        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
Approve    Reject
    â”‚         â”‚
    â”‚         â†“
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    â”‚  Update  â”‚
    â”‚    â”‚  Status  â”‚
    â”‚    â”‚ âŒ REJECTâ”‚
    â”‚    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚          â”‚
    â”‚          â†“
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    â”‚  Notify  â”‚
    â”‚    â”‚   User   â”‚
    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Call Paystackâ”‚
â”‚ Refund API   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”
   â”‚       â”‚
Success   Fail
   â”‚       â”‚
   â”‚       â†“
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â”‚ Status â”‚
   â”‚  â”‚ FAILED â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Update Statusâ”‚
â”‚ âœ… COMPLETED â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Process      â”‚
â”‚ Refund Type  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”
   â”‚        â”‚
Money    Credit
Refund   Reversal
   â”‚        â”‚
   â”‚        â†“
   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   â”‚  Add   â”‚
   â”‚   â”‚Credits â”‚
   â”‚   â”‚  Back  â”‚
   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Send Money   â”‚
â”‚ to Bank      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Notify User  â”‚
â”‚    ğŸ“§        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Database Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    USERS     â”‚
â”‚              â”‚
â”‚ â€¢ id (PK)    â”‚
â”‚ â€¢ email      â”‚
â”‚ â€¢ full_name  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1:N
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                        â”‚                  â”‚
   â†“                        â†“                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PURCHASES  â”‚   â”‚   PAYMENTS   â”‚   â”‚   REFUNDS    â”‚
â”‚              â”‚   â”‚              â”‚   â”‚              â”‚
â”‚ â€¢ id (PK)    â”‚   â”‚ â€¢ id (PK)    â”‚   â”‚ â€¢ id (PK)    â”‚
â”‚ â€¢ user_id FK â”‚   â”‚ â€¢ user_id FK â”‚   â”‚ â€¢ user_id FK â”‚
â”‚ â€¢ package    â”‚   â”‚ â€¢ reference  â”‚   â”‚ â€¢ amount     â”‚
â”‚ â€¢ amount     â”‚   â”‚ â€¢ status     â”‚   â”‚ â€¢ status     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                      â”‚
       â”‚ 1:N                                  â”‚ 1:N
       â”‚                                      â”‚
       â†“                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CREDITS    â”‚                     â”‚REFUND_HISTORYâ”‚
â”‚              â”‚                     â”‚              â”‚
â”‚ â€¢ id (PK)    â”‚                     â”‚ â€¢ id (PK)    â”‚
â”‚ â€¢ user_id FK â”‚                     â”‚ â€¢ refund FK  â”‚
â”‚ â€¢ purchase FKâ”‚                     â”‚ â€¢ old_status â”‚
â”‚ â€¢ session FK â”‚                     â”‚ â€¢ new_status â”‚
â”‚ â€¢ used_at    â”‚                     â”‚ â€¢ changed_by â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ N:1
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SESSIONS   â”‚
â”‚              â”‚
â”‚ â€¢ id (PK)    â”‚
â”‚ â€¢ user_id FK â”‚
â”‚ â€¢ credit FK  â”‚
â”‚ â€¢ therapist  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’° Pricing & Savings Visualization

```
Package Comparison:

Single Session (â‚¦5,000)
â”œâ”€ 1 session Ã— â‚¦5,000 = â‚¦5,000
â””â”€ Savings: â‚¦0

Bronze Pack (â‚¦13,500) ğŸ’¼
â”œâ”€ 3 sessions Ã— â‚¦4,500 = â‚¦13,500
â””â”€ Savings: â‚¦1,500 (10%)

Silver Pack (â‚¦20,000) â­
â”œâ”€ 5 sessions Ã— â‚¦4,000 = â‚¦20,000
â””â”€ Savings: â‚¦5,000 (20%)

Gold Pack (â‚¦28,000) ğŸ‘‘ BEST VALUE
â”œâ”€ 8 sessions Ã— â‚¦3,500 = â‚¦28,000
â””â”€ Savings: â‚¦12,000 (30%)


Savings Chart:
â‚¦12,000 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Gold
â‚¦5,000  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Silver
â‚¦1,500  â–ˆâ–ˆâ–ˆâ–ˆ Bronze
â‚¦0      â”€ Single
```

---

## ğŸ“Š Status Flow Diagrams

### Payment Status States

```
    INITIATED
        â”‚
        â†“
    PENDING â”€â”€â”€â”€â†’ CANCELLED
        â”‚
        â†“
  â”Œâ”€ PROCESSING
  â”‚     â”‚
  â”‚     â†“
  â”‚  SUCCESS â†â”€â”€â”
  â”‚             â”‚
  â””â”€â”€â†’ FAILED  â”‚
               â”‚
            RETRY
```

### Credit Status States

```
    AVAILABLE
        â”‚
        â†“
    RESERVED (Session Booked)
        â”‚
        â”œâ”€â”€â†’ USED (Session Completed)
        â”‚
        â””â”€â”€â†’ RELEASED (Session Cancelled)
               â”‚
               â†“
           AVAILABLE
```

### Refund Status States

```
    PENDING
        â”‚
        â”œâ”€â”€â†’ REJECTED
        â”‚
        â†“
    APPROVED
        â”‚
        â†“
    PROCESSING
        â”‚
        â”œâ”€â”€â†’ FAILED
        â”‚      â”‚
        â”‚      â†“
        â”‚   RETRY
        â”‚
        â†“
    COMPLETED
```

---

## ğŸ¨ UI Component Hierarchy

```
CreditPurchaseFlow
â”œâ”€â”€ Package Selection
â”‚   â”œâ”€â”€ Package Card
â”‚   â”‚   â”œâ”€â”€ Package Header
â”‚   â”‚   â”œâ”€â”€ Price Display
â”‚   â”‚   â”œâ”€â”€ Features List
â”‚   â”‚   â””â”€â”€ Purchase Button
â”‚   â””â”€â”€ Best Value Badge
â”œâ”€â”€ Confirmation Dialog
â”‚   â”œâ”€â”€ Package Summary
â”‚   â”œâ”€â”€ Price Breakdown
â”‚   â””â”€â”€ Action Buttons
â””â”€â”€ Payment Processing
    â”œâ”€â”€ Loading State
    â””â”€â”€ Error Display

PaymentHistory
â”œâ”€â”€ Tabs (Payments/Refunds)
â”‚   â”œâ”€â”€ Payments Tab
â”‚   â”‚   â”œâ”€â”€ Transaction Table
â”‚   â”‚   â”œâ”€â”€ Receipt Button
â”‚   â”‚   â””â”€â”€ Refund Button
â”‚   â””â”€â”€ Refunds Tab
â”‚       â””â”€â”€ Refund Table
â””â”€â”€ Refund Dialog
    â”œâ”€â”€ Reason Selector
    â”œâ”€â”€ Details Input
    â””â”€â”€ Submit Button

RefundManagement (Admin)
â”œâ”€â”€ Statistics Cards
â”‚   â”œâ”€â”€ Pending Count
â”‚   â”œâ”€â”€ Processing Count
â”‚   â”œâ”€â”€ Completed Count
â”‚   â””â”€â”€ Rejected Count
â”œâ”€â”€ Refund Table
â”‚   â”œâ”€â”€ Filter Tabs
â”‚   â”œâ”€â”€ Refund Rows
â”‚   â””â”€â”€ Action Buttons
â”œâ”€â”€ Details Dialog
â”‚   â”œâ”€â”€ User Info
â”‚   â”œâ”€â”€ Payment Info
â”‚   â””â”€â”€ Refund Details
â””â”€â”€ Reject Dialog
    â””â”€â”€ Reason Input
```

---

## ğŸ”” Notification Flow

```
Payment Successful:
User â†’ Payment Complete â†’ Paystack Webhook
                             â†“
                        Next.js API
                             â†“
                      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                      â”‚             â”‚
                  Database      Courier
                      â”‚             â”‚
                Credits Added    Email Sent
                             â†“
                           USER
                    âœ‰ï¸ "Payment Successful"

Refund Approved:
Admin â†’ Approve Refund â†’ API Route
                             â†“
                        Paystack
                             â†“
                        Processing
                             â†“
                      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                      â”‚             â”‚
                  Database      Courier
                      â”‚             â”‚
                Status Updated   Email Sent
                             â†“
                           USER
                    âœ‰ï¸ "Refund Processed"
```

---

## ğŸš€ Deployment Pipeline

```
Development
    â”‚
    â”œâ”€ Run Tests
    â”œâ”€ Check Lints
    â””â”€ Build
        â”‚
        â†“
Staging
    â”‚
    â”œâ”€ Deploy DB Schema
    â”œâ”€ Set Environment
    â”œâ”€ Test Payments
    â””â”€ Verify Webhooks
        â”‚
        â†“
Production
    â”‚
    â”œâ”€ Database Backup
    â”œâ”€ Deploy Code
    â”œâ”€ Smoke Tests
    â””â”€ Monitor
        â”‚
        â†“
    Live! ğŸ‰
```

---

**Pro Tip:** Keep this visual guide handy when explaining the system to new team members or debugging issues!

**Version:** 1.0.0  
**Last Updated:** October 1, 2025

